generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ProductStatus {
  ACTIVE   @map("active")
  INACTIVE @map("inactive")
}

model Role {
  id    Int    @id @default(autoincrement())
  name  String @unique
  users User[]

  @@map("roles")
}

model User {
  id           Int      @id @default(autoincrement())
  email        String   @unique
  name         String
  passwordHash String   @map("password_hash")
  roleId       Int      @map("role_id")
  role         Role     @relation(fields: [roleId], references: [id])
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("users")
}

model Product {
  id                Int           @id @default(autoincrement())
  name              String
  description       String
  price             Decimal       @db.Decimal(10, 2)
  sku               String        @unique
  inventoryQuantity Int           @map("inventory_quantity")
  status            ProductStatus @default(ACTIVE)
  deletedAt         DateTime?     @map("deleted_at")
  createdAt         DateTime      @default(now()) @map("created_at")
  updatedAt         DateTime      @updatedAt @map("updated_at")

  @@index([deletedAt])
  @@map("products")
}
